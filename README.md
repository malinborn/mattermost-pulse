# Mattermost Reactions Exporter

Утилита для экспорта реакций из постов Mattermost в YAML-формат.

## Требования

- Python 3.8+
- Зависимости из `requirements.txt`

## Установка

```bash
# Создать виртуальное окружение
python -m venv venv

# Активировать окружение
# macOS/Linux:
source venv/bin/activate
# Windows:
# venv\Scripts\activate

# Установить зависимости
pip install -r requirements.txt
```

## Настройка переменных окружения (опционально)

### Токен доступа Mattermost

Вы можете настроить личный токен Mattermost через переменную среды `MATTERMOST_PERSONAL_TOKEN`, чтобы не вводить его каждый раз в интерфейсе приложения.

### OpenAI API ключ для AI-улучшения текстов

Для использования функции AI-улучшения текстов сообщений в разделе "Рассылка", необходимо настроить переменную окружения `OPENAI_API_KEY` с вашим API ключом OpenAI.

### Разовый запуск с токеном

Передайте переменные среды непосредственно при запуске:

```bash
MATTERMOST_PERSONAL_TOKEN="ваш_токен_здесь" OPENAI_API_KEY="ваш_openai_ключ" streamlit run app.py
```

### Использование .env файла (рекомендуется)

Скопируйте файл `env.example` в `.env` и заполните своими значениями:

```bash
cp env.example .env
nano .env
```

Затем запустите приложение с загрузкой переменных:

```bash
# Установите python-dotenv если его нет
pip install python-dotenv

# Загрузите переменные и запустите
export $(cat .env | xargs) && streamlit run app.py
```

### Постоянное сохранение в профиле (MacOS)

Чтобы переменные были доступны при каждом запуске терминала, добавьте их в файл `~/.zshrc`:

```bash
# Откройте файл в редакторе
nano ~/.zshrc

# Добавьте в конец файла следующие строки:
export MATTERMOST_PERSONAL_TOKEN="ваш_токен_здесь"
export OPENAI_API_KEY="ваш_openai_ключ"

# Сохраните (Ctrl+O, Enter, Ctrl+X) и примените изменения:
source ~/.zshrc
```

После этого переменные будут автоматически доступны во всех новых сеансах терминала.

**Примечание:** Для bash используйте файл `~/.bash_profile` или `~/.bashrc` вместо `~/.zshrc`.

## Запуск

```bash
streamlit run app.py
```

Приложение откроется в браузере по адресу `http://localhost:8501`

### Остановка приложения

Чтобы остановить приложение, нажмите `Ctrl+C` в терминале, где оно запущено.

Если приложение зависло:
```bash
pkill -f streamlit
```

## Использование

### Анализ реакций

1. Введите URL сервера Mattermost
2. Введите личный токен доступа (или настройте переменную среды `MATTERMOST_PERSONAL_TOKEN`)
3. Укажите URL или ID поста/канала
4. Нажмите кнопку для получения реакций
5. Просмотрите и экспортируйте результаты

### Массовая рассылка с AI-улучшением

1. Перейдите на вкладку **"✉️ Рассылка"**
2. Введите список получателей (email или username)
3. Напишите текст сообщения
4. **[Опционально]** Нажмите кнопку **"✨ Улучшить с AI"** для автоматического улучшения текста
   - Требуется настроенный `OPENAI_API_KEY`
   - AI улучшит грамматику, стиль и профессионализм сообщения
5. Проверьте предпросмотр и отправьте сообщения

## Разработка

Проект находится в разработке. См. `prd_plan.md` для плана разработки.
